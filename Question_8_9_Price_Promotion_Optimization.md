# VeloMotion GmbH 供应链优化：第8-9题 价格促销决策模型

## 第8题：单次价格促销最优时机选择

### 问题描述
市场调研表明：一个月内进行5%的价格折扣会：
- 该月销量增加35%
- 将后续两个月中6%的需求提前到促销月份

### 数学模型建立

#### 1. 需求调整函数

对于选定的促销月份 $m$，定义需求函数为：

$$D'_t = \begin{cases}
D_t \times 1.35 + 0.06(D_{t+1} + D_{t+2}) & \text{if } t = m \text{ (促销月)} \\
D_t \times (1 - 0.06) = 0.94D_t & \text{if } t = m+1 \text{ (后一个月)} \\
D_t \times (1 - 0.06) = 0.94D_t & \text{if } t = m+2 \text{ (后两个月)} \\
D_t & \text{otherwise}
\end{cases}$$

#### 2. 收益分析框架

对于促销月份 $m$ 的决策变量：

**收益变化：**
- 促销月份额外销量收益：$\Delta R_m = 0.35D_m \times (1,250 - 620) = 0.35D_m \times 630$
- 促销月份折扣损失：$\Delta R_{promo} = (D_m \times 1.35 + 0.06(D_{m+1} + D_{m+2})) \times (1,250 \times 0.95 - 1,250) = -0.05 \times (D_m \times 1.35 + 0.06(D_{m+1} + D_{m+2})) \times 1,250$
- 后续两个月需求提前的收益提升：$\Delta R_{forward} = 0.06(D_{m+1} + D_{m+2}) \times 630$
- 后续两个月需求下降的收益损失：$\Delta R_{loss} = -0.06(D_{m+1} + D_{m+2}) \times 630$

**成本变化：**
主要影响库存成本、生产成本和订货成本。

#### 3. 优化决策

定义二进制变量：$y_m \in \{0,1\}$，表示是否在月份 $m$ 进行促销

**目标函数增强版：**

$$\max Z = \sum_{t=1}^{12} (Revenue_t - TotalCost_t)$$

其中，收入根据是否促销调整：

$$Revenue_t = \begin{cases}
P \times D'_t & \text{if } y_m = 1 \text{ (促销情景下)} \\
P \times D_t & \text{otherwise}
\end{cases}$$

**约束条件：**
$$\sum_{m=1}^{12} y_m = 1 \quad \text{(选择单个促销月份)}$$

#### 4. 净收益计算公式

对于促销月份 $m$ 的净利益（相对于基础情景）：

$$\Delta \Pi_m = \underbrace{0.35 D_m \times 630}_{\text{额外销量利润}} - \underbrace{0.05 \times (D_m \times 1.35 + 0.06(D_{m+1} + D_{m+2})) \times 1,250}_{\text{折扣成本}} + \underbrace{\Delta InventoryCost_m}_{\text{库存成本变化}}$$

### 求解策略

**步骤1：** 对每个可能的促销月份 $m \in \{1,2,...,12\}$，计算修正后的基础模型

**步骤2：** 比较12种方案的总利润，选择最优月份：

$$m^* = \arg\max_{m} \Pi_m$$

**步骤3：** 分析结果中的：
- 年度利润变化量
- 总成本结构变化
- 库存水平变化

### 关键洞察

**促销月份选择原则：**

1. **需求弹性分析**：选择促销月份 $m$ 使得 $D_m + 0.06(D_{m+1} + D_{m+2})$ 最大

   $$m^* = \arg\max_{m} (D_m + 0.06(D_{m+1} + D_{m+2}))$$

2. **成本负担能力**：考虑生产成本和库存成本
   - 如果 $m$ 之后库存成本较低的月份，优先选择 $m$
   - 避免在高库存成本期间进行促销

3. **产能利用率**：如果 $m$ 月份产能有余量，折扣成本更低

---

## 第9题：多次价格促销的最优决策

### 问题描述与假设

- 促销不能连续（间隔至少1个月）
- 需要评估1次、2次、3次...促销的最优性
- 找出最优的促销次数和时机

### 数学模型建立

#### 1. 推广的需求函数

对于多个非连续促销月份集合 $M = \{m_1, m_2, ..., m_k\}$（其中 $m_{i+1} \geq m_i + 2$）：

$$D'_t = D_t \times \alpha_t + \beta_t$$

其中：
- $\alpha_t$：需求倍增因子
- $\beta_t$：从其他月份提前的需求

$$\alpha_t = \begin{cases}
1.35 & \text{if } t \in M \text{ (促销月)} \\
0.94 & \text{if } t \in M+1 \text{ or } t \in M+2 \text{ (受影响月)} \\
1.0 & \text{otherwise}
\end{cases}$$

$$\beta_t = \begin{cases}
\sum_{m \in M, m < t} 0.06(D_m + \sum_{j \in \{m+1,m+2\}} D_j) \times \mathbb{1}_{t \in [m, m+2]} & \text{if } t \text{ 为受影响月份} \\
0 & \text{otherwise}
\end{cases}$$

#### 2. 非连续约束

定义促销决策变量：$y_t \in \{0,1\}$ 表示月份 $t$ 是否进行促销

**非连续性约束：**
$$y_t + y_{t+1} \leq 1, \quad \forall t = 1,2,...,11$$

**促销次数约束：**
$$\sum_{t=1}^{12} y_t = k, \quad k \in \{0,1,2,3,...\}$$

#### 3. 优化模型

对于给定的促销次数 $k$：

$$\max Z_k = \sum_{t=1}^{12} (P \times D'_t(y) - MC \times D'_t(y)) - \sum_{\text{costs}}$$

$$\text{s.t.}$$
$$\sum_{t=1}^{12} y_t = k$$
$$y_t + y_{t+1} \leq 1, \quad \forall t = 1,...,11$$
$$y_t \in \{0,1\}$$

#### 4. 相互作用效应建模

**关键发现：多个促销的边际效应递减**

第 $i$ 个促销的边际收益：
$$MR_i = \sum_{m_i \in M, |M|=i} \left[\underbrace{0.35 D_{m_i} \times 630}_{\text{直接增长}} - \underbrace{(P-MC) \times \sum_{j \in D_{m_i}+1,m_i+2} 0.06 D_j}_{\text{需求提前损失}} - \underbrace{0.05P \times D'_{m_i}}_{\text{折扣成本}}\right]$$

由于提前需求不能重复抵扣，多个促销的总效益满足：
$$Z_{k} - Z_{k-1} < Z_{k-1} - Z_{k-2}$$

即：**边际收益递减**

### 求解策略

#### 步骤1：网格搜索

对所有可能的促销组合进行枚举求解（使用数学优化）：

**非连续性约束下的组合数：**
- $k=1$：12种组合
- $k=2$：最多 $\binom{12}{2} - \text{consecutive} \approx 55$ 种组合
- $k=3$：更多组合

为每个组合求解完整的优化模型，比较目标函数值。

#### 步骤2：候选促销月份筛选

基于单次促销的分析，将最优的 $k$ 个月份作为候选，进行组合评估。

$$M^* \subseteq \{m^*_1, m^*_2, ..., m^*_k\}$$

#### 步骤3：动态规划求解（可选高级方法）

定义状态：$DP[t][k]$ = 在前 $t$ 个月内进行 $k$ 次促销的最大利润

**递推关系：**
$$DP[t][k] = \max \begin{cases}
DP[t-1][k] & \text{(不在月份t促销)} \\
\max_{t' \leq t-2} DP[t'][k-1] + \text{profit}(t, t') & \text{(在月份t促销，上一次在t')} \\
\end{cases}$$

### 多促销情景分析框架

| 促销次数 | 候选月份 | 预期年利润 | 边际收益 | 推荐度 |
|---------|---------|----------|--------|--------|
| 0       | -       | $\Pi_0$ | -      | 基线   |
| 1       | $m_1^*$ | $\Pi_1$ | $\Pi_1 - \Pi_0$ | ✓      |
| 2       | $m_1^*, m_2^*$ | $\Pi_2$ | $\Pi_2 - \Pi_1$ | 根据边际收益判断 |
| 3       | ... | $\Pi_3$ | $\Pi_3 - \Pi_2$ | 根据边际收益判断 |
| k       | ... | $\Pi_k$ | $\Pi_k - \Pi_{k-1}$ | ... |

### 决策规则

**最优促销次数 $k^*$ 满足：**

$$k^* = \arg\max_{k} \Pi_k$$

或采用贪心启发式算法：

$$k^* = \max\{k: \Pi_k - \Pi_{k-1} > 0\}$$

即：**只要边际收益为正，就增加促销次数**

### 关键洞察

1. **季节性强的月份不适合多个促销**（需求被重复计算）
2. **间隔至少为2个月**确保需求完全独立
3. **后期促销效率更高**（后续月份需求较大）
4. **库存持有成本**限制了过度促销

---

## 实现注意事项

### 数学编程实现

```
# 伪代码框架
for each k in {0, 1, 2, ..., 12}:
    for each valid combination of k non-consecutive months M:
        # 求解基础模型，修改demand参数
        profits[M] = solve_optimization_model(M, demand_function)

    optimal_M_for_k = argmax(profits for all M with |M|=k)
    results[k] = (optimal_M_for_k, profits[optimal_M_for_k])

# 找到全局最优
k_star = argmax_k(results[k])
```

### 模型约束清单

- ✓ 非连续性：$y_t + y_{t+1} \leq 1$
- ✓ 需求耦合：前两个月需求减少6%
- ✓ 库存平衡：$I_t = I_{t-1} + P_t + O_t - D'_t$
- ✓ 生产容量：$P_t + O_t \leq WC_t$
- ✓ 所有订单必须在年末前完成

---

## 预期答案结构

### 第8题答案框架
1. **最优促销月份：** 月份 X（基于边际收益分析）
2. **年利润变化：** ±Z元
3. **成本结构变化：**
   - 收入增加：A元
   - 折扣成本：-B元
   - 库存成本变化：±C元
   - 净利润变化：X元

### 第9题答案框架
1. **最优促销次数：** k次
2. **最优时机：** 月份 {m₁, m₂, ..., mₖ}
3. **利润对比：**
   - 0次：$\Pi_0$元
   - 1次：$\Pi_1$元（+Y元）
   - 2次：$\Pi_2$元（+Z元）
   - k次：$\Pi_k$元（最优）
4. **边际分析：** 解释为什么k次最优

